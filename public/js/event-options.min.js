/*! wembli-website 2014-08-09 */
"use strict";angular.module("wembliApp",["ngRoute","ngAnimate","mgcrea.ngStrap","wembliApp.controllers","wembliApp.controllers.eventOptions","wembliApp.controllers.header","wembliApp.filters","wembliApp.services","wembliApp.services.header","wembliApp.services.facebook","wembliApp.services.twitter","wembliApp.services.pixel","wembliApp.directives","wembliApp.directives.header"]).config(["$routeProvider","$locationProvider",function(){}]).run(["$timeout","initRootScope","$rootScope","$location","$route","$window","facebook","twitter","plan","wembliRpc","overlay",function(a,b,c,d,e,f,g,h,i,j,k){console.log("run event-options angular app"),k.loading(!0),k.show(),a(function(){i.fetch(function(){})}),f.fbAsyncInit=function(){g.getLoginStatus(),c.facebook=g},h.getLoginStatus()}]),angular.module("wembliApp.controllers.eventOptions",[]).controller("EventOptionsCtrl",["$scope","wembliRpc","$window","plan","overlay",function(a,b,c,d,e){a.addOnsError=!1,a.inviteOptionsError=!1,a.guestListOptionsError=!1,a.submitInProgress=!1,d.get(function(c){"undefined"==typeof a.next&&(a.next="/invitation/"+c.event.eventId+"/"+c.event.eventName),b.fetch("event-options.init",{},function(b,c){a.parking=c.parking,a.restaurant=c.restaurant,a.hotel=c.hotel,a.guest_friends=c.guestFriends,a.organizer_not_attending=c.organizerNotAttending,a.guest_list=c.guestList,a.over_21=c.over21,Object.keys(c.errors).length>0&&(a.addOnsError=c.errors.addOns?!0:!1,a.inviteOptionsError=c.errors.inviteOptions?!0:!1,a.guestListOptionsError=c.errors.guestList?!0:!1),e.loading(!1),e.hide()})}),a.submitForm=function(){var d={};d.parking=a.parking,d.restaurant=a.restaurant,d.hotel=a.hotel,d.guest_friends=a.guest_friends,d.organizer_not_attending=a.organizer_not_attending,d.guest_list=a.guest_list,d.over_21=a.over_21,a.submitInProgress=!0,b.fetch("event-options.submit",d,function(b,d){b&&(a.error=!0,a.errorMessage=b),d.success||(a.error=!0,a.errorMessage=d.errorMessage),d.success?c.location.href=a.next:a.submitInProgress=!1})}}]);